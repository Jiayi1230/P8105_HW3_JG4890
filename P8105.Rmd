---
title: "P8105_HW3_JG4890"
author: "Jiayi Ge"
date: "2024-10-09"
output: html_document
---
##Problem 1
Import and clean Dataset
```{r}
library(p8105.datasets)
library(dplyr)
library(janitor)
library(lubridate)
data("ny_noaa")
noaa_clean <- ny_noaa %>%
  janitor::clean_names() %>%
  mutate(
    prcp = as.numeric(prcp) / 10, 
    tmax = as.numeric(tmax) / 10, 
    tmin = as.numeric(tmin) / 10,
    snwd = as.numeric(snwd) / 10
  )%>%
  mutate(year = year(date), month = month(date), day = day(date))
head(noaa_clean)
print(noaa_clean)

#To identify the most common snowfall values
noaa_clean %>%
  count(snow) %>%
  arrange(desc(n)) %>%
  head(5)

```
Size and Structure: The NOAA dataset contains daily weather data from several stations in New York State. The dataset has `r nrow(ny_noaa)` rows and `r ncol(ny_noaa)` columns which is over 2.5 million rows and multiple columns such as `id`, `date`, `tmax`, `tmin`, `prcp`, `snwd`, and `snow`.

Key Variables:

`id`: Identifies the weather station. Weather station ID.

`date`: The date of the observation.

`tmax`, `tmin`: Maximum and minimum temperatures in tenths of degrees Celsius.

`prcp`: Precipitation in tenths of millimeters.

`snow`: Snowfall in millimeters.

`snwd`: Snow depth mm.

`Missing Data`: Missing data is prevalent, especially for temperature and precipitation measurements. We will explore this further.

**Ensure observations in reasonable units**

`tmax` and `tmin` (maximum and minimum temperature) are recorded in tenths of degrees Celsius, so dividing by 10 converts them to standard °C.

`prcp` (precipitation) is recorded in tenths of millimeters, so dividing by 10 converts it to millimeters.

`snwd` (snow depth) is recorded in millimeters, but since snow depth is typically expressed in centimeters, dividing by 10 converts it to cm.

**Most commonly observed values For Snowfall**: The most common snowfall value is 0, which means there is no snow on most days.

```{r}
library(ggplot2)
# Filter data for January and July, group by year and station, and calculate average tmax
# Summarize average max temperature for January and July
jan_jul_summary <- noaa_clean %>%
  filter(month %in% c(1, 7)) %>%
  group_by(year, month) %>%
  summarize(avg_tmax = mean(tmax, na.rm = TRUE), .groups = "drop")
# Convert month to a factor for better plotting
jan_jul_summary <- jan_jul_summary %>%
  mutate(month = factor(month, labels = c("January", "July")))

# Create a bar plot for average max temperature
ggplot(jan_jul_summary, aes(x = factor(year), y = avg_tmax, fill = month)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Average Max Temperature in January and July",
       x = "Year",
       y = "Average Max Temperature (°C)") +
  scale_fill_manual(values = c("January" = "blue", "July" = "orange")) +
  theme_minimal()

```
In January, the average max temperature is generally lower than in July.
In the year of 1992, 2000, 2009, their Max temp during July is much lower than the others, which is lower than 25.

